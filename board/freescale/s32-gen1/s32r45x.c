/*
 * Copyright 2018-2019 NXP
 *
 * SPDX-License-Identifier:	GPL-2.0+
 */

#include "asm/arch-s32/siul-s32r45.h"
#include "board_common.h"
#include <asm/arch/soc.h>
#include <common.h>

void setup_iomux_uart(void)
{
#if (CONFIG_FSL_LINFLEX_MODULE == 0)

	/* Set PC_10 - MSCR[42] - for LIN0_RX */
	writel(SIUL2_MSCR_S32R45_PORT_CTRL_UART_RXD,
	       SIUL2_0_MSCRn(SIUL2_PC10_MSCR_S32R45_UART0));

	/* Set LIN0_RX - IMCR[512] - to link to PC_10 */
	writel(SIUL2_IMCR_S32R45_UART_RXD_to_pad,
	       SIUL2_0_IMCRn(SIUL2_PC10_IMCR_S32R45_UART0));

	/* Set PC_09 - MSCR[41] - for LIN0_TX */
	writel(SIUL2_MSCR_S32R45_PORT_CTRL_UART0_TXD,
	       SIUL2_0_MSCRn(SIUL2_PC09_MSCR_S32R45_UART0));

#elif (CONFIG_FSL_LINFLEX_MODULE == 1)
#	ifdef CONFIG_TARGET_TYPE_S32GEN1_EMULATOR
	/* Set PA_11 - MSCR[11] - for LIN1_RX */
	writel(SIUL2_MSCR_S32R45_PORT_CTRL_UART_RXD,
	       SIUL2_0_MSCRn(SIUL2_PA11_MSCR_S32R45_UART1));

	/* Set PA_11 - IMCR[674] - for LIN1_RX */
	writel(SIUL2_IMCR_S32R45_UART_RXD_to_pad,
	       SIUL2_1_IMCRn(SIUL2_PA11_IMCR_S32R45_UART1));

	/* Set PA_12 - MSCR[12] - for LIN1_TX */
	writel(SIUL2_MSCR_S32R45_PORT_CTRL_UART1_TXD,
	       SIUL2_0_MSCRn(SIUL2_PA12_MSCR_S32R45_UART1));
#	else
	#error Please add pinmuxing for UART1
#	endif /* CONFIG_TARGET_TYPE_S32GEN1_EMULATOR */
#else
#error "Invalid UART pinmuxing configuration"
#endif
}

void setup_iomux_sdhc(void) {}

void setup_iomux_i2c(void)
{
#ifndef CONFIG_TARGET_TYPE_S32GEN1_EMULATOR
	/* I2C0 - Serial Data Input */
	writel(SIUL2_MSCR_S32R45_PAD_CTRL_I2C0_SDA,
	       SIUL2_MSCRn(SIUL2_MSCR_S32R45_PB_00));
	writel(SIUL2_IMCR_S32R45_PAD_CTRL_I2C0_SDA,
	       SIUL2_IMCRn(SIUL2_PB_00_IMCR_S32R45_I2C0_SDA));

	/* I2C0 - Serial Clock Input */
	writel(SIUL2_MSCR_S32R45_PAD_CTRL_I2C0_SCLK,
	       SIUL2_MSCRn(SIUL2_MSCR_S32R45_PB_01));
	writel(SIUL2_IMCR_S32R45_PAD_CTRL_I2C0_SCLK,
	       SIUL2_IMCRn(SIUL2_PB_01_IMCR_S32R45_I2C0_SCLK));

	/* I2C1 - Serial Data Input */
	writel(SIUL2_MSCR_S32R45_PAD_CTRL_I2C1_SDA,
	       SIUL2_MSCRn(SIUL2_MSCR_S32R45_PA_15));
	writel(SIUL2_IMCR_S32R45_PAD_CTRL_I2C1_SDA,
	       SIUL2_IMCRn(SIUL2_PA_15_IMCR_S32R45_I2C1_SDA));

	/* I2C1 - Serial Clock Input */
	writel(SIUL2_MSCR_S32R45_PAD_CTRL_I2C1_SCLK,
	       SIUL2_MSCRn(SIUL2_MSCR_S32R45_PA_14));
	writel(SIUL2_IMCR_S32R45_PAD_CTRL_I2C1_SCLK,
	       SIUL2_IMCRn(SIUL2_PA_14_IMCR_S32R45_I2C1_SCLK));
#endif
}

#ifdef CONFIG_FSL_DSPI
void setup_iomux_dspi(void)
{
	/* DSPI 1*/
	writel(SIUL2_MSCR_S32R45_PAD_CTL_DSPI1_SCK,
	       SIUL2_0_MSCRn(SIUL2_PB04_MSCR_S32R45_DSPI1_SCK));
	writel(SIUL2_IMCR_S32R45_PAD_CTL_DSPI1_SCK,
	       SIUL2_1_IMCRn(SIUL2_PB04_IMCR_S32R45_DSPI1_SCK));

	writel(SIUL2_MSCR_S32R45_PAD_CTL_DSPI_SIN,
	       SIUL2_0_MSCRn(SIUL2_PB05_MSCR_S32R45_DSPI1_SIN));
	writel(SIUL2_IMCR_S32R45_PAD_CTL_DSPI1_SIN,
	       SIUL2_1_IMCRn(SIUL2_PB05_IMCR_S32R45_DSPI1_SIN));

	writel(SIUL2_MSCR_S32R45_PAD_CTL_DSPI1_SOUT,
	       SIUL2_0_MSCRn(SIUL2_PB06_MSCR_S32R45_DSPI1_SOUT));

	writel(SIUL2_MSCR_S32R45_PAD_CTL_DSPI1_PCS0,
	       SIUL2_0_MSCRn(SIUL2_PB07_MSCR_S32R45_DSPI1_PCS0));

	writel(SIUL2_MSCR_S32R45_PAD_CTL_DSPI1_PCS1,
	       SIUL2_0_MSCRn(SIUL2_PB08_MSCR_S32R45_DSPI1_PCS1));

	writel(SIUL2_MSCR_S32R45_PAD_CTL_DSPI1_PCS2,
	       SIUL2_0_MSCRn(SIUL2_PC03_MSCR_S32R45_DSPI1_PCS2));

	writel(SIUL2_MSCR_S32R45_PAD_CTL_DSPI1_PCS3,
	       SIUL2_0_MSCRn(SIUL2_PB10_MSCR_S32R45_DSPI1_PCS3));

	/* DSPI 2 */
	writel(SIUL2_MSCR_S32R45_PAD_CTL_DSPI2_SCK,
	       SIUL2_0_MSCRn(SIUL2_PB11_MSCR_S32R45_DSPI2_SCK));
	writel(SIUL2_IMCR_S32R45_PAD_CTL_DSPI2_SCK,
	       SIUL2_1_IMCRn(SIUL2_PB11_IMCR_S32R45_DSPI2_SCK));

	writel(SIUL2_MSCR_S32R45_PAD_CTL_DSPI_SIN,
	       SIUL2_0_MSCRn(SIUL2_PC01_MSCR_S32R45_DSPI2_SIN));
	writel(SIUL2_IMCR_S32R45_PAD_CTL_DSPI2_SIN,
	       SIUL2_1_IMCRn(SIUL2_PC01_IMCR_S32R45_DSPI2_SIN));

	writel(SIUL2_MSCR_S32R45_PAD_CTL_DSPI2_SOUT,
	       SIUL2_0_MSCRn(SIUL2_PB13_MSCR_S32R45_DSPI2_SOUT));

	writel(SIUL2_MSCR_S32R45_PAD_CTL_DSPI2_PCS0,
	       SIUL2_0_MSCRn(SIUL2_PB14_MSCR_S32R45_DSPI2_PCS0));

	writel(SIUL2_MSCR_S32R45_PAD_CTL_DSPI2_PCS1,
	       SIUL2_0_MSCRn(SIUL2_PB15_MSCR_S32R45_DSPI2_PCS1));

	writel(SIUL2_MSCR_S32R45_PAD_CTL_DSPI2_PCS2,
	       SIUL2_0_MSCRn(SIUL2_PB09_MSCR_S32R45_DSPI2_PCS2));

	writel(SIUL2_MSCR_S32R45_PAD_CTL_DSPI2_PCS3,
	       SIUL2_0_MSCRn(SIUL2_PC02_MSCR_S32R45_DSPI2_PCS3));

	/* DSPI 3 */
	writel(SIUL2_MSCR_S32R45_PAD_CTL_DSPI3_SCK,
	       SIUL2_0_MSCRn(SIUL2_PC04_MSCR_S32R45_DSPI3_SCK));
	writel(SIUL2_IMCR_S32R45_PAD_CTL_DSPI3_SCK,
	       SIUL2_1_IMCRn(SIUL2_PC04_IMCR_S32R45_DSPI3_SCK));

	writel(SIUL2_MSCR_S32R45_PAD_CTL_DSPI_SIN,
	       SIUL2_0_MSCRn(SIUL2_PC06_MSCR_S32R45_DSPI3_SIN));
	writel(SIUL2_IMCR_S32R45_PAD_CTL_DSPI3_SIN,
	       SIUL2_1_IMCRn(SIUL2_PC06_IMCR_S32R45_DSPI3_SIN));

	writel(SIUL2_MSCR_S32R45_PAD_CTL_DSPI3_SOUT,
	       SIUL2_0_MSCRn(SIUL2_PC13_MSCR_S32R45_DSPI3_SOUT));

	writel(SIUL2_MSCR_S32R45_PAD_CTL_DSPI3_PCS0,
	       SIUL2_0_MSCRn(SIUL2_PC07_MSCR_S32R45_DSPI3_PCS0));


	/* DSPI 5 */
	writel(SIUL2_MSCR_S32R45_PAD_CTL_DSPI5_SCK,
	       SIUL2_1_MSCRn(SIUL2_PK00_MSCR_S32R45_DSPI5_SCK));
	writel(SIUL2_IMCR_S32R45_PAD_CTL_DSPI5_SCK,
	       SIUL2_1_IMCRn(SIUL2_PK00_IMCR_S32R45_DSPI5_SCK));

	writel(SIUL2_MSCR_S32R45_PAD_CTL_DSPI_SIN,
	       SIUL2_1_MSCRn(SIUL2_PK04_MSCR_S32R45_DSPI5_SIN));
	writel(SIUL2_IMCR_S32R45_PAD_CTL_DSPI5_SIN,
	       SIUL2_1_IMCRn(SIUL2_PK04_IMCR_S32R45_DSPI5_SIN));

	writel(SIUL2_MSCR_S32R45_PAD_CTL_DSPI5_SOUT,
	       SIUL2_1_MSCRn(SIUL2_PK05_MSCR_S32R45_DSPI5_SOUT));

	writel(SIUL2_MSCR_S32R45_PAD_CTL_DSPI5_PCS0,
	       SIUL2_1_MSCRn(SIUL2_PK03_MSCR_S32R45_DSPI5_PCS0));
}
#endif
